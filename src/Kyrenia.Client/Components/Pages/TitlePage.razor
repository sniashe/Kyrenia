@using Kyrenia.Contracts.DTOs

@page "/title/{Id}"

@inject IMediaService MediaService

@if (_media is null)
{
    <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
}
else
{
    <PageTitle>@_media.Title - KYRENIA</PageTitle>

    <MudContainer Class="mx-12 my-4">
        <MudPaper Class="pa-4">
            <MudText Typo="Typo.h4">@_media.Title</MudText>
            <MudText Typo="Typo.button">@_media.Year | @_media.Rated | @_media.Runtime</MudText>
            <MudDivider Class="my-2" />
            <MudText>@_media.Plot</MudText>
            <MudDivider Class="my-2" />
            <MudText>Director: @_media.Director</MudText>
            <MudDivider Class="my-2" />
            <MudText>Writers: @_media.Writer</MudText>
            <MudDivider Class="my-2" />
            <MudText>Stars: @_media.Actors</MudText>
        </MudPaper>
    </MudContainer>
}

@code {
    [Parameter]
    [EditorRequired]
    public string Id { get; init; }

    private MediaFullDetailsDto? _media;

    protected override async Task OnInitializedAsync()
    {
        if (!string.IsNullOrWhiteSpace(Id))
        {
            _media = await MediaService.GetMediaDetailsAsync(Id);
        }
    }
}
